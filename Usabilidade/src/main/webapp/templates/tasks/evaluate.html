<div class="container-padding-left">


		<div class="usdm-fixed-top-info" ng-class="{ 'active' : sendDataChange }">
			<div class="usdm-refresh-link">
	  			<span>Dados de ações obrigatórias foram modificados.</span> 
		  		<a class="btn btn-primary usdm-btn-primary-pulse" ng-click="saveChangeSituations()">
		  			<i class="icon-white icon-download-alt"></i>
		  			Clique aqui para salvar!
		  		</a>
		  		<button type="button" class="close" ng-click="resetSendDataChange()">&times;</button>
			</div>
		</div>
		
		<div class="usdm-fixed-top-info" ng-class="{ 'active' : alertChangeTask }">
			<div class="usdm-refresh-link">
	  			<span>Definir o novo "Agrupamento de Ações Obrigatórias":</span> 
		  		<a class="btn" ng-click="resetAlertChangeTask()" ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}/tarefas/{{taskCtrl.task.id}}" target="_blank">
           			<span class="icon-list-alt"></span>
           			{{ 'datamining.task.open' | translate }}
           		</a>
		  		<button type="button" class="close" ng-click="resetAlertChangeTask()">&times;</button>
			</div>
		</div>
			
		<ul class="breadcrumb">
			<li>
				<a ng-href="/"> 
					{{ 'inicio' | translate}}
				</a>
				<span class="divider">/</span>
			</li>
			<li>
				<a ng-href="#/testes/"> 
					{{ 'datamining' | translate}} - {{ 'datamining.testes.list' | translate}}
				</a>
				<span class="divider">/</span>
			</li>
			<li>
				<a ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}"> 
					{{ 'datamining.testes.details' | translate}}
				</a>
				<span class="divider">/</span>
			</li>
			<li>
				<a ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}/tarefas"> 
					{{ 'datamining.testes.evaluation' | translate}}
				</a>
				<span class="divider">/</span>
			</li>
			<li>
				<a ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}/avaliar/{{taskCtrl.evalTestId}}"> 
					{{ 'datamining.testes.tasks' | translate}}
				</a>
				<span class="divider">/</span>
			</li>
			<li class="active">{{ 'datamining.tasks.evaluate' | translate}}</li>

		</ul>
		
		<usdm-messages-alert></usdm-messages-alert>
	    
		<div class="row show-grid">
		    
	        <div class="span12">
	        	<div class="row-fluid">
	        		<div class="span12">
	        			<h2> {{ 'datamining.evaluation'| translate }} - {{taskCtrl.task.title}}</h2>
	        		</div>
	        	</div>
	        
	        	<!-- ETAPAS -->
        		<div class="row-fluid">
	        		<div class="span12">
		        		<ul class="usdm-progressbar">
		        			<li ng-class="{ 'active': stepEval >= 1 }" ng-click="changeStepEval(1)">{{ 'dataminint.step.details' | translate }}</li>
		        			<li ng-class="{ 'active': stepEval >= 2 }" ng-click="changeStepEval(2)">{{ 'dataminint.step.classifying' | translate }}</li>
		        			<li ng-class="{ 'active': stepEval >= 3 }" ng-click="changeStepEval(3)">{{ 'dataminint.step.clustering' | translate }}</li>
		        			<li ng-class="{ 'active': stepEval >= 4 }" ng-click="changeStepEval(4)">{{ 'dataminint.step.comparing' | translate }}</li>
		        			<li ng-class="{ 'active': stepEval >= 5 }" ng-click="changeStepEval(5)">{{ 'dataminint.step.verify' | translate }}</li>
		        		</ul>
	        		</div>
	        	</div>
	        
	        	<!-- ETAPA 1 -->
	        	<div ng-show="stepEval == 1">
	        	
	        		<usdm-progress-header 
					 	step-number="stepEval"
					 	on-step-eval-back="stepEvalBack()"
					 	on-step-eval-next="stepEvalNext()"
					 	show-info="showInfoStep1"
					 	title="'dataminint.step.details' | translate"
					 	info="'dataminint.step.details.info' | translate">
					 </usdm-progress-header>
	        	
	        		<div class="row-fluid">
		        		<div class="usdm-box u-clear-fix">
		        			<h2 class="usdm-box-header">
					    		{{ 'datamining.tasks.details' | translate}}
				            </h2>
				            <div class="row-fluid">
						        <div class="usdm-box-body">
						            <div class="span6">
							            <dl>
							            	<dt>{{ 'datamining.tasks.title' | translate}}:</dt>
							            	<dd>{{taskCtrl.task.title}}</dd>
							            </dl>
							            <dl>
							            	<dt>{{ 'datamining.tasks.threshold' | translate}}:</dt>
							            	<dd>{{taskCtrl.task.threshold}} {{ 'minutes' | translate}}</dd>
							            </dl>
							            <dl>
							            	<dt>Datas da Avaliação:</dt>
							            	<dd>
							            		<span class="usdm-split-text">
							            			<span class="pull-left">{{ 'date.initial' | translate }}:</span>
							            			<span>{{ taskCtrl.formatDate(taskCtrl.evalTestDateInit) }}</span>
							            		</span>
							            		<span class="usdm-split-text">
							            			<span class="pull-left">{{ 'date.end' | translate }}:</span>
							            			<span>{{ taskCtrl.formatDate(taskCtrl.evalTestDateEnd) }}</span>
							            		</span>
							            	</dd>
							            </dl>
							            <dl>
							            	<dt>{{ 'datamining.tasks.evaluate.actions.ok.title' | translate}}:</dt>
							            	<dd>
							            		{{ 'qtd' | translate }}: <span class="text-green">{{taskCtrl.result.minActionsOk | number:0}}</span> {{ 'to' | translate }} <span class="text-red">{{taskCtrl.result.maxActionsOk | number:0}}</span> {{ 'actions' | translate }}. <br/>
							            		{{ 'mean' | translate }}: <b>{{taskCtrl.result.meanActionsOk | number:2}}</b> | {{ 'stdv' | translate }}: <b>{{taskCtrl.result.stdDevActionsOk | number:2}} </b> {{ 'actions' | translate }}.
							            	</dd>
							            </dl>
							            <dl>
							            	<dt>{{ 'datamining.tasks.evaluate.time.ok.title' | translate}}:</dt>
							            	<dd>
							            		{{ 'qtd' | translate }}: <span class="text-green">{{taskCtrl.result.minTimesOk | msConverter}}</span> {{ 'to' | translate }} <span class="text-red">{{taskCtrl.result.maxTimesOk | msConverter}}</span>. <br/>
							            		{{ 'mean' | translate }}: <b>{{taskCtrl.result.meanTimesOk | msConverter}}</b> | {{ 'stdv' | translate }}: <b>{{taskCtrl.result.stdDevTimesOk | msConverter}}.</b>
							            	</dd>
							            </dl>
							            <dl>
							            	<dt>{{ 'datamining.tasks.viewdetails' | translate }}:</dt>
							            	<dd>
												<a class="btn u-width-full" ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}/tarefas/{{taskCtrl.task.id}}" target="_blank">
							            			<span class="icon-list-alt"></span>
							            			{{ 'datamining.task.open' | translate }}
							            		</a>
							            	</dd>
							            </dl>
						            </div>
						            
						            <div class="span6">
							    		<h3 class="usdm-box-header" style="margin: 10px; border: none;">
								    		{{ 'datamining.tasks.evaluate.graphs.completude' | translate}}:
							            </h3>  
										  
										<canvas id="base" class="chart-base" chart-type="graphSuccessType" data="graphSuccessData"  height="224" width="449"
											labels="graphSuccessLabels" legend="true" click="graphSuccessToggle" colours="graphSuccessColours"></canvas>
										
										<dl>
						            		<dt>Dados das Sessões ({{ taskCtrl.result.sessions.length }}):</dt>
							            	<dd>Sessões "Completas": {{ taskCtrl.result.countSessionsSuccess }}</dd>
							            	<dd>Sessões "Reinício": {{ taskCtrl.result.countSessionsRepeat }}</dd>
							            	<dd>Sessões "Limiar": {{ taskCtrl.result.countSessionsThreshold }}</dd>
							            	<dd>Sessões "Erro": {{ taskCtrl.result.countSessionsError }}</dd>
							            </dl>
							        </div>
			        			</div>
			        			
					    		
					    	</div>
			        	</div>
		        	</div>
	        	</div>
	        
	        	
	        	<!-- ETAPA 2 -->
	        	<div ng-show="stepEval == 2 || stepEval == 5">
	        	
	        		<usdm-progress-header ng-if="stepEval == 2"
					 	step-number="stepEval"
					 	on-step-eval-back="stepEvalBack()"
					 	on-step-eval-next="stepEvalNext()"
					 	show-info="showInfoStep2"
					 	title="'dataminint.step.classifying' | translate"
					 	info="'dataminint.step.classifying.info' | translate">
					 </usdm-progress-header>
					 <usdm-progress-header ng-if="stepEval == 5"
					 	step-number="stepEval"
					 	on-step-eval-back="stepEvalBack()"
					 	on-step-eval-next="stepEvalNext()"
					 	show-info="showInfoStep5"
					 	title="'dataminint.step.verify' | translate"
					 	info="'dataminint.step.verify.info' | translate">
					 </usdm-progress-header>
					 
	        	
	        		<div class="row-fluid">
		        		<div class="span4 u-margin-top-back-5">
		        			<a class="usdm-clickable-box text-center" ng-class="{ 'usdm-clickable-box--active': isShowContentGraph() }" ng-click="showContentGraph()">
				            	<h2 class="ng-binding">{{ 'dataminint.eval.graph' | translate }}</h2>
				            </a>
		        		</div>
		        		<div class="span4 u-margin-top-back-5">
		        			<a class="usdm-clickable-box text-center" ng-class="{ 'usdm-clickable-box--active': isShowContentGuide() }" ng-click="showContentGuide()">
				            	<h2 class="ng-binding">{{ 'dataminint.eval.guide' | translate }}</h2>
				            </a>
		        		</div>
		        		<div class="span4 u-margin-top-back-5">
		        			<a class="usdm-clickable-box text-center" ng-class="{ 'usdm-clickable-box--active': isShowContentAdvanced() }" ng-click="showContentAdvanced()">
				            	<h2 class="ng-binding">{{ 'dataminint.eval.advanded' | translate }}</h2>
				            </a>
		        		</div>	        	
		        	</div>
	        	
	        		<!-- VISUALIZAR GRAFO -->
	        		<div ng-show="isShowContentGraph()">
		        		<div class="usdm-box">
		        			<h2 class="usdm-box-header">
		        				Visualizar Grafo de Padrões
		        			</h2>
		        			<div class="usdm-box-body">
		        			
		        				<h3 class="usdm-title-margin">{{ 'datamining.redo' | translate}}:</h3>
		        				<div class="row-fluid">
									<div class="control-group span6">
						            	<label class="control-label" for="lastMinSup">{{ 'datamining.mining.minsupport' | translate}} (%):*</label>
						            	<div class="controls">
						                	<input class="span12" type="text" name="lastMinSup" ng-model="minSup" /> 
						            	</div>
						        	</div>
						        	<div class="control-group span6">
						            	<label class="control-label" for="minpattern">{{ 'datamining.mining.minpattern' | translate}}:*</label>
						            	<div class="controls">
						                	<input class="span12" type="text" name="minpattern" ng-model="minItens" /> 
						            	</div>
						        	</div>
								</div>
								<div class="row-fluid">
									<div class="control-group span6">
						            	<label class="control-label" for="sessionFilter">Sessões Mineradas:*</label>
						            	<div class="controls">
						            		<select class="span12" name="sessionFilter" ng-model="sessionFilter" ng-options="key as filtro.desc for (key , filtro) in sessionClassificationFilterEnum"></select>
						            	</div>
						        	</div>
						        	<div class="control-group span6">
						        		<label class="control-label">&nbsp;</label>
						        		<div class="controls">
						        			<a class="btn pull-right" ng-href="#/testes/{{taskCtrl.task.testDataMining.id}}/avaliacao/{{taskCtrl.evalTestId}}/tarefas/{{taskCtrl.task.id}}/avaliar/sessoes/{{ sessionClassificationFilterEnum[sessionFilter].val }}/minsup/{{ minSup }}/minitens/{{ minItens }}">
						            			<span class="icon-repeat"></span> Minerar e Recarregar Página
						            		</a>
						        		</div>
						        	</div>
								</div>
		        			
		        				<hr/>
		        			
		        			
					            <h3 class="usdm-title-margin">Grafo de Padrões Sequenciais Frequentes:</h3>
					            <small>Sessões Mineradas: ({{sessionClassificationFilterEnum[sessionKeyByRequest].desc}});</small>
					            
		        				<!--
		        				<div class="row-fluid btn-group usdm-btn-group" ng-init="advancedShowGraph = true">
								  <button type="button" class="btn usdm-div6"
								  	ng-class=" {'active' : graphType.id == 'sessions' } " ng-click="changeGraphType(false)">
								  	Baseado nas {{ graphTypeEnum.SESSIONS.desc }}
								  </button>
								  <button type="button" class="btn usdm-div6"
								  	ng-class=" {'active' : graphType.id == 'patterns' } " ng-click="changeGraphType(true)">
								  	Baseado nos {{ graphTypeEnum.PATTERNS.desc }}
								  </button>
								</div>
								-->
								
		        				<div id="mynetwork" class="graph-actions"></div>
		        				<div class="btn-group network-options">
		        					<button ng-click="changeGraphType(false)" class="btn"><i class="icon-file"></i></button>
								    <button ng-click="zoomOutGraph(graphIdsEnum.GRAPH_DEFAULT)" class="btn"><i class="icon-zoom-in"/></button>
								    <button ng-click="zoomInGraph(graphIdsEnum.GRAPH_DEFAULT)" class="btn"><i class="icon-zoom-out"/></button>
								    <button ng-click="resetZoomGraph(graphIdsEnum.GRAPH_DEFAULT)" class="btn"><i class="icon-screenshot"/></button>
								    
								    <i class="usdm-min-range-icon-left icon-resize-small"/>
								    <input class="usdm-min-range-input" type="range" min="0.01" max="20" step="0.05"
										ng-model="factorScaleXAux" ng-change="changeScaleX(graphIdsEnum.GRAPH_DEFAULT)" />
								    <i class="usdm-min-range-icon-right icon-resize-full" />
								    
								    <!--
								    <button ng-click="subScaleX(graphIdsEnum.GRAPH_DEFAULT)" class="btn"><i class="icon-resize-small"/></button>
								    <button ng-click="addScaleX(graphIdsEnum.GRAPH_DEFAULT)" class="btn"><i class="icon-resize-full"/></button>
								     -->
								 </div>
		        			</div>
		        		</div>
		        		
		        		<div id="mynetwork-info" class="usdm-box" ng-show="taskCtrl.nodeSelected != null || taskCtrl.edgeSelected != null">
	       					<div ng-show="taskCtrl.nodeSelected != null">
	       						<h2 class="usdm-box-header">
			        				Ação Selecionada
			        			</h2>
			        			<div class="usdm-box-body">
			        				
			        				<div class="row-fluid">
										<div class="span6">
											<h3 class="table-title">Informações da Ação:</h3>
											
											<usdm-action-info action="taskCtrl.nodeSelected"
											 	situations-enum="situationsEnum"
											 	special-actions-enum="specialActionsEnum"
											 	situation-aux="situationAux"
											 	situation-special-aux="specialSituationAux"
											 	on-select-situation="selectSituationAction(id, sit)"
											 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
											</usdm-action-info>
											 
											<hr/>
								            
				       						<dl class="dl-with-margin-bottom">
								            	<dd class="ng-binding">
						            				Nome: <b>{{ taskCtrl.nodeSelected.name }}</b>;<br/>
						            				Realizado: <b>{{ taskCtrl.nodeSelected.value }} vezes</b>;<br/>
						            				Arestas Para: <b>{{ taskCtrl.nodeSelected.edgesTo }}</b>;<br/>
						            				Arestas De: <b>{{ taskCtrl.nodeSelected.edgesFrom }}</b>;<br/>
						            				Padrões Presentes: <b>{{ taskCtrl.nodeSelected.patternsCount }} de {{ taskCtrl.frequentPatterns.length }} ({{ ((taskCtrl.nodeSelected.patternsCount / taskCtrl.frequentPatterns.length) * 100) | number:2 }} %)</b>;<br/>
						            				Quantidade de Sessões: <b>{{ taskCtrl.nodeSelected.sessions.length }} de {{ taskCtrl.result.sessions.length }} ({{ ((taskCtrl.nodeSelected.sessions.length / taskCtrl.result.sessions.length) * 100) | number:2 }} %)</b>.<br/>
								            	</dd>
								            </dl>
										</div>
										<div class="span6">
											<h3 class="table-title">Sessões ({{ taskCtrl.nodeSelected.sessions.length }}) que contém esta Ação:</h3>
								            <div class="usdm-withscroll">
									            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  			<thead>
										  				<th ts-criteria="id|lowercase">Id</th>
										  				<th ts-criteria="qdtActions|parseInt">{{ 'datamining.tasks.actionscount' | translate }}</th>
										  				<th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
										  				<th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
										  				<th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
										  			</thead>
										            <tbody>
													    <tr class="session-{{session.classification}}" ng-repeat="session in taskCtrl.nodeSelected.sessions" ts-repeat>
													      <td><a ng-click="showActionsSessionGuide(session)">{{session.id}}</a></td>
													      <td>{{session.qdtActions}}</td>
													      <td>{{session.time | msConverter}}</td>
													      <td>{{session.effectiveness | number:2}}</td>
													      <td>{{session.efficiency | number:2}}</td>
													    </tr>
													</tbody>
												</table>
											</div>
											<div class="table-labels">
												<span class="title">{{ 'label' | translate }}:</span>
												<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
											</div>
										</div>
									</div>
			        				
								</div>
	       					</div>
	       					<div ng-show="taskCtrl.edgeSelected != null">
	       						<h2 class="usdm-box-header">
			        				Aresta Selecionada
			        			</h2>
			        			<div class="usdm-box-body">
									<dl>
						            	<dt class="ng-binding">Informações da Aresta:</dt>
						            	<dd class="ng-binding">
						            		De: <b>{{ taskCtrl.edgeSelected.fromId }}</b>;<br/>
				            				Para: <b>{{ taskCtrl.edgeSelected.toId }}</b>;<br/>
				            				Realizado: <b>{{ taskCtrl.edgeSelected.value }} vezes</b>.<br/>
						            	</dd>
						            </dl>
									<h3 class="table-title">Sessões ({{ taskCtrl.edgeSelected.sessions.length }}) que contém esta aresta:</h3>
						            <div class="usdm-withscroll">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  			<thead>
								  				<th ts-criteria="id|lowercase">Id</th>
								  				<th ts-criteria="qdtActions|parseInt">{{ 'datamining.tasks.actionscount' | translate }}</th>
								  				<th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
								  				<th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								  				<th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								  			</thead>
								            <tbody>
											    <tr class="session-{{session.classification}}" ng-repeat="session in taskCtrl.edgeSelected.sessions" ts-repeat>
											      <td><a ng-click="showActionsSessionGuide(session)">{{session.id}}</a></td>
											      <td>{{session.qdtActions}}</td>
											      <td>{{session.time | msConverter}}</td>
											      <td>{{session.effectiveness | number:2}}</td>
											      <td>{{session.efficiency | number:2}}</td>
											    </tr>
											</tbody>
										</table>
									</div>
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
									</div>
						            
			        			</div>
					        </div>
	       				</div>
	       			</div>
	        		
	        		
	        		
	        		<!-- ANALISE GUIADA -->
	        		<div ng-show="isShowContentGuide()">
	        			<div class="usdm-box" ng-show="step == '1'">
	        				<h2 class="usdm-box-header">
		        				{{ 'dataminint.eval.guide' | translate }}
		        			</h2>
		        			
	        				<ul class="breadcrumb">
							  <li class="active">Visualizar Sessões</li>
							</ul>
		        			<h3 class="usdm-box-header">
		        				1 - Visualizar Sessões:
		        			</h3>
		        			<div class="usdm-box-body">
		        				<h3 class="usdm-title-margin">
		        					Tabela de Sessões ({{ sessionsGuide.length }}):
		        				</h3>
		        				
		        				<usdm-filter-table usdm-placeholder="Filtro" usdm-search-model="searchTableAdvancedSessions"></usdm-filter-table>
		        				<div class="usdm-withscroll-large">
			        				<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
									  <thead>
									    <tr>
									      <th ts-criteria="order|parseInt" ts-default="ascending">Prior.</th>
									      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
									      <th ts-criteria="actions.length|parseInt">Acoes</th>
									      <th ts-criteria="time|parseInt">Tempo</th>
									      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								          <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
									      <th ts-criteria="classification|lowercase">Classific.</th>
									    </tr>
									  </thead>
									  <tbody>
									    <tr class="session-{{session.classification}}" ng-repeat="session in sessionsGuide | filter:searchTableAdvancedSessions" ts-repeat>
									      <td class="text-center">{{session.order}}</td>
									      <td><a ng-click="showActionsSessionGuide(session)">{{session.id}}</a></td>
									      <td>{{session.actions.length | number:2}}</td>
									      <td>{{session.time | msConverter}}</td>
									      <td>{{session.effectiveness | number:2}} %</td>
									      <td>{{session.efficiency | number:2}} %</td>
									      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
									    </tr>
									  </tbody>
									</table>
								</div>
								<div class="table-labels">
									<span class="title">{{ 'label' | translate }}:</span>
									<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
								</div>
		        			</div>
		        		</div>
		        		<div class="usdm-box" ng-show="step == '1.1'">
		        			<ul class="breadcrumb">
							  <li><a ng-click="goToGuideStep('1')">Visualizar Sessões</a> <span class="divider">/</span></li>
							  <li class="active">Visualizar Ações</li>
							</ul>
		        			<h3 class="usdm-box-header">
		        				1.1 - Visualizar Ações:
		        				<a ng-click="goToGuideStep('2')" class="btn litle-margin-x btn-primary pull-right">{{ 'nextStep' | translate }}</a>
		        				<a ng-click="goToGuideStep('1')" class="btn litle-margin-x pull-right">{{ 'backStep' | translate }}</a>
		        			</h3>
		        			<div class="usdm-box-body">
		        				
					            <usdm-session-info session="sessionSelected"
					            	graphsession="graphsession"
					            	get-classification-from-enum="getClassificationFromEnum(clas)">
					            </usdm-session-info>
					            <h3 class="usdm-title-margin">{{ 'datamining.tasks.required.list' | translate }}:</h3>
					            <dl class="dl-with-margin-bottom">
					            	<dt>
					            		{{ 'datamining.tasks.required.resume' | translate }}:
					            	</dt>
					            	<dd ng-bind-html="sessionActionsReqStr | sanitize"></dd>
					            </dl>
					             
					            <hr/>
					            
					            <h3 class="usdm-title-margin">Modos de Visualização:</h3>
		        				<div class="row-fluid btn-group usdm-btn-group" ng-init="advancedShowGraph = true">
								  <button type="button" class="btn usdm-div4"
								  	ng-class=" {'active' : advancedShowGraph == true } " ng-click="advancedShowGraph = advancedShowGraph ? false : true">
								  	Grafo da Sessão
								  </button>
								  <button type="button" class="btn usdm-div4"
								  	ng-class=" {'active' : advancedShowListActions == true } " ng-click="advancedShowListActions = advancedShowListActions ? false : true">
								  	Lista de Ações da Sessão
								  </button>
								  <button type="button" class="btn usdm-div4"
								  	ng-class=" {'active' : advancedShowRequiredActions == true } " ng-click="advancedShowRequiredActions = advancedShowRequiredActions ? false : true">
								  	Lista de Ações Obrigatórias
								  </button>
								</div>
					            
					            <div ng-show="advancedShowGraph">
						            <h3 class="usdm-title-margin">Grafo das Ações Realizadas na Sessão:</h3>
						            <div id="mynetworkSession" class="graph-actions"></div>
					            	<div class="btn-group network-options">
									    <button ng-click="zoomOutGraph(graphIdsEnum.GRAPH_SESSION)" class="btn"><i class="icon-zoom-in"/></button>
									    <button ng-click="zoomInGraph(graphIdsEnum.GRAPH_SESSION)" class="btn"><i class="icon-zoom-out"/></button>
									    <button ng-click="resetZoomGraph(graphIdsEnum.GRAPH_SESSION)" class="btn"><i class="icon-screenshot"/></button>

										<i class="usdm-min-range-icon-left icon-resize-small"/>
									    <input class="usdm-min-range-input" type="range" min="0.01" max="20" step="0.05"
											ng-model="factorScaleXAux" ng-change="changeScaleX(graphIdsEnum.GRAPH_SESSION)" />
									    <i class="usdm-min-range-icon-right icon-resize-full" />

								    
									    <button ng-click="forwardStepGraph(graphIdsEnum.GRAPH_SESSION, sessionSelected)" class="btn pull-right"><i class="icon-forward"/></button>
									    <button ng-click="backwardStepGraph(graphIdsEnum.GRAPH_SESSION, sessionSelected)" class="btn pull-right"><i class="icon-backward"/></button>
									    <button ng-click="repeatStepsGraph(graphIdsEnum.GRAPH_SESSION, sessionSelected)" class="btn pull-right"><i class="icon-repeat"/></button>
									    <span style="line-height: 24px; padding: 0 10px;" class="pull-right">
									    	Ação Atual (Passo): {{positionStepView[graphIdsEnum.GRAPH_SESSION]}}
									    </span>
									 </div>
								</div>
								
								<div class="row-fluid">
									<div ng-class="{'span6' : advancedShowListActions == true }">
										<div ng-show="advancedShowGraph || advancedShowListActions">
											<div ng-show="taskCtrl.actionViewSelected != null" class="usdm-title-margin">
												 <usdm-action-info action="taskCtrl.actionViewSelected"
												 	momento="sessionSelected.actions[positionStepView[graphIdsEnum.GRAPH_SESSION]-1].time | date:'dd/MM/yyyy HH:mm:ss'"
												 	situations-enum="situationsEnum"
												 	special-actions-enum="specialActionsEnum"
												 	situation-aux="situationAux"
												 	situation-special-aux="specialSituationAux"
												 	on-select-situation="selectSituationAction(id, sit)"
												 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
												 </usdm-action-info>
								            </div>
							            </div>
									</div>
									<div class="span6" ng-show="advancedShowListActions">
						           		<h3 class="usdm-title-margin">Tabela de Ações Realizadas ({{ sessionSelected.actions.length }}):</h3>
							            <div class="usdm-withscroll-large">
								            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
											  <thead>
											    <tr>
											      <th ts-criteria="id">Id</th>
											      <th ts-criteria="id">Ok</th>
											      <th ts-criteria="id">Err</th>
											      <th ts-criteria="time |parseInt" ts-default="ascending">Hora</th>
											      <th ts-criteria="action">Acao</th>
											      <th ts-criteria="element|lowercase">Elemento</th>
											      <th ts-criteria="local|lowercase">Local</th>
											    </tr>
											  </thead>
											  <tbody>
											    <tr ng-click="setActionViewSelected(action,true)" ng-class="{ 'action-required': action.required == true }" class="action-situation-{{idSituationAction(action.identifier)}}" ng-repeat="action in sessionSelected.actions" ts-repeat>
											      <td color-action color-action-elem="action" color-ctrl="taskCtrl" title="Count = {{taskCtrl.result.pageViewActionCount[action.identifier]}}">{{action.identifier}}</td>
											      <td class="text-center" ng-click="setSituationAction(action.identifier, situationsEnum.OK)">
											      	<i ng-show="isSituationAction(action.identifier, situationsEnum.OK)" class="icon-ok-sign"></i>
											      	<i ng-hide="isSituationAction(action.identifier, situationsEnum.OK)" class="icon-ok-circle"></i>
											      </td>
											      <td class="text-center" ng-click="setSituationAction(action.identifier, situationsEnum.ERROR)">
											      	<i ng-show="isSituationAction(action.identifier, situationsEnum.ERROR)" class="icon-remove-sign"></i>
											      	<i ng-hide="isSituationAction(action.identifier, situationsEnum.ERROR)" class="icon-remove-circle"></i>
											      </td>
											      <td>{{action.time | date:"dd/MM/yyyy ' ' HH:mm:ss"}}</td>
											      <td>{{action.action}}</td>
											      <td title="{{action.element}}">{{action.element | cut:true:15:'&hellip;'}}</td>
											      <td title="{{action.local}}">{{action.local | cut:true:15:'&hellip;'}}</td>
											    </tr>
											  </tbody>
											</table>
										</div>
										<div class="table-labels">
											<span class="title">{{ 'label' | translate }}:</span>
											<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
											<span class="label label-info">{{ 'required' | translate }}</span>
										</div>
										<hr/>
									</div>
								</div>
								
								<div ng-show="advancedShowRequiredActions">
									<h3 class="usdm-title-margin">{{ 'datamining.tasks.required.list' | translate }}:</h3>
						            <dl class="dl-with-margin-bottom" ng-show="taskCtrl.actionViewSelected != null">
						            	<dt>
						            		{{ 'datamining.tasks.correctness' | translate }}:
						            	</dt>
						            	<dd>
						            		{{ sessionSelected.userRateRequired | number:2}}%
						            	</dd>
						            	<dt>
						            		{{ 'datamining.tasks.required.resume' | translate }}:
						            	</dt>
						            	<dd ng-bind-html="sessionActionsReqStr | sanitize"></dd>
						            </dl>
						            <h3 class="usdm-title-margin">
										Tabela de Ações Obrigatórias ({{ sessionActionsRequired.length }}):
									</h3>
						            <div class="usdm-withscroll-large">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  <thead>
										    <tr>
										      <th ts-criteria="id">Ident.</th>
										      <th ts-criteria="id">Id Ação</th>
										      <th ts-criteria="id">Descrição</th>
										    </tr>
										  </thead>
										  <tbody>
										    <tr ng-class="{ 'action-required': action.isFound == true }" ng-repeat="action in sessionActionsRequired" ts-repeat>
										      <td class="text-center">{{action.iddb}}</td>
										      <td class="text-center">{{action.identifier}}</td>
										      <td>{{action.resume}}</td>
										    </tr>
										  </tbody>
										</table>
									</div>
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span class="label label-info">Ações Obrigatórias Encontradas</span>
									</div>
								</div>
								
		        			</div>
		        		</div>
		        		<div class="usdm-box" ng-show="step == '2'">
		        			<ul class="breadcrumb">
							  <li><a ng-click="goToGuideStep('1')">Visualizar Sessões</a> <span class="divider">/</span></li>
							  <li><a ng-click="goToGuideStep('1.1', sessionSelected)">Visualizar Ações</a> <span class="divider">/</span></li>
							  <li class="active">Ações Mais Realizadas</li>
							</ul>
		        			<h3 class="usdm-box-header">
		        				2 - Ações Mais Realizadas:
		        				<a class="btn litle-margin-x btn-primary pull-right" ng-click="goToGuideStep('3')">{{ 'nextStep' | translate }}</a>
		        				<a class="btn litle-margin-x pull-right" ng-click="goToGuideStep('1.1', sessionSelected)">{{ 'backStep' | translate }}</a>
		        			</h3>
		        			<div class="usdm-box-body">
			        			<div class="row-fluid">
			        				<div class="span6" ng-show="actionViewSelected != null">
				        				<usdm-action-info action="actionViewSelected"
										 	situations-enum="situationsEnum"
										 	special-actions-enum="specialActionsEnum"
										 	situation-aux="situationAux"
										 	situation-special-aux="specialSituationAux"
										 	on-select-situation="selectSituationAction(id, sit)"
										 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
										 </usdm-action-info>
									</div>
						            <div ng-class="{'span6' : actionViewSelected != null, 'span12 u-without-margin-left' : actionViewSelected == null}">
						            	<h3>
											Tabela de Ações Mais Realizadas ({{ taskCtrl.actionsArr.length }}):
										</h3>
							            <div class="usdm-withscroll">
											<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
											  <thead>
											    <tr>
											      <th ts-criteria="identifier">Id</th>
											      <th ts-criteria="count|parseInt" ts-default="descending">Count</th>
											      <th ts-criteria="id">Ok</th>
											      <th ts-criteria="id">Err</th>
											      <th ts-criteria="value|lowercase">{{ 'datamining.tasks.actions.description' | translate }}</th>
											    </tr>
											  </thead>
											  <tbody>
											    <tr ng-click="setActionViewGuideSelected(action.$key)" ng-class="{ 'action-required': isSpecialSituationAction(action.$key, specialActionsEnum.REQUIRED) }"  class="action-situation-{{idSituationAction(action.$key)}}" ng-repeat="action in taskCtrl.actionsArr" ts-repeat>
											      <td color-action color-action-elem="action" color-ctrl="taskCtrl" title="Count = {{taskCtrl.result.pageViewActionCount[action.$key]}}">{{action.$key}}</td>
											      <td>{{ action.count }}</td>
											      <td class="text-center" ng-click="setSituationAction(action.$key, situationsEnum.OK)">
											      	<i ng-show="isSituationAction(action.$key, situationsEnum.OK)" class="icon-ok-sign"></i>
											      	<i ng-hide="isSituationAction(action.$key, situationsEnum.OK)" class="icon-ok-circle"></i>
											      </td>
											      <td class="text-center" ng-click="setSituationAction(action.$key, situationsEnum.ERROR)">
											      	<i ng-show="isSituationAction(action.$key, situationsEnum.ERROR)" class="icon-remove-sign"></i>
											      	<i ng-hide="isSituationAction(action.$key, situationsEnum.ERROR)" class="icon-remove-circle"></i>
											      </td>
											      <td>{{ action.value }}</td>
											    </tr>
											  </tbody>
											</table>
										</div>
										<div class="table-labels">
											<span class="title">{{ 'label' | translate }}:</span>
											<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
											<span class="label label-info">{{ 'required' | translate }}</span>
										</div>
									</div>
								</div>
		        			</div>
		        		</div>
		        		<div class="usdm-box" ng-show="step == '3'">
	        				<ul class="breadcrumb">
							  <li><a ng-click="goToGuideStep('1')">Visualizar Sessões</a> <span class="divider">/</span></li>
							  <li><a ng-click="goToGuideStep('1.1', sessionSelected)">Visualizar Ações</a> <span class="divider">/</span></li>
							  <li><a ng-click="goToGuideStep('2')">Ações Mais Realizadas</a> <span class="divider">/</span></li>
							  <li class="active">Clusterizar Sessões</li>
							</ul>
		        			<h3 class="usdm-box-header">
		        				3 - Clusterizar Sessões:
		        				<a class="btn litle-margin-x btn-primary pull-right disabled" ng-click="goToGuideStep('3')">{{ 'nextStep' | translate }}</a>
		        				<a class="btn litle-margin-x pull-right" ng-click="goToGuideStep('2')">{{ 'backStep' | translate }}</a>
		        			</h3>
		        			<div class="usdm-box-body">
		        				<a class="btn btn-primary btn-large-middle" ng-click="stepEval = 3">Clusterizar Sessões</a>
		        			</div>
		        		</div>
		        		
		        		
	        		</div>
	        	
	        	
	        	
	        		<!-- ANALISE AVANCADA -->
	        		<div class="usdm-box" ng-show="isShowContentAdvanced()">
		            	<h2 class="usdm-box-header">
		            		<a ng-show="taskCtrl.previousMode" class="btn" ng-click="backMode()" style="margin-bottom: 4px;"><i class="icon-chevron-left"></i></a>
				    		{{ taskCtrl.mode.title }} 
				    		<select ng-model="taskCtrl.mode" ng-options="m as m.desc for m in taskCtrl.modesArr | filter:{ notAnOption : false }" class="pull-right"></select>
			            </h2>
			            <div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'users'">
			            	<h3>
								Tabela de Usuários ({{ taskCtrl.result.users.length }}):
							</h3>
			            	<div class="usdm-withscroll-large">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
								      <th ts-criteria="actionsAverageOk|parseFloat">{{ 'datamining.tasks.evaluate.actions' | translate }}</th>
								      <th ts-criteria="timesAverageOk|parseFloat">{{ 'datamining.tasks.evaluate.time' | translate }}</th>
								      <th ts-criteria="rateSuccess|parseFloat">{{ 'datamining.tasks.evaluate.rateSuccess' | translate }}</th>
								      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								      <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								      <th ts-criteria="countSessionsSuccess+countSessionsRepeat+countSessionsThreshold|parseInt">{{ 'datamining.tasks.evaluate.sessions.total' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr ng-repeat="user in taskCtrl.result.users" ts-repeat>
								      <td><a ng-click="showUserSessions(user)">{{user.username}}</a></td>
								      
								      <td>{{user.actionsAverageOk | number:2}}</td>
								      <td>{{user.timesAverageOk | msConverter}}</td>
								      <td>{{user.rateSuccess | number:2}} %</td>
								      <td>{{user.effectiveness | number:2}} %</td>
								      <td>{{user.efficiency | number:2}} %</td>
								      <td title="{{ 'datamining.tasks.evaluate.complete' | translate }} = {{user.countSessionsSuccess}} | {{ 'datamining.tasks.evaluate.restart' | translate }} = {{user.countSessionsRepeat}} | {{ 'datamining.tasks.evaluate.threshold' | translate }} = {{user.countSessionsThreshold}}">
								      	{{user.countSessionsSuccess + user.countSessionsRepeat + user.countSessionsThreshold}}
								      </td>
								    </tr>
								  </tbody>
								</table>
							</div>
						</div>
						<div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'userSessions'">
							<h3>
								Tabela de Sessões ({{ taskCtrl.userSessions.length }}):
							</h3>
							<div class="usdm-withscroll-large">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
								      <th ts-criteria="actions.length|parseInt">{{ 'datamining.tasks.actions' | translate }}</th>
								      <th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
								      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								      <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								      <th ts-criteria="classification|lowercase">{{ 'datamining.tasks.class' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr class="session-{{session.classification}}" ng-repeat="session in taskCtrl.userSessions" ts-repeat>
								      <td><a ng-click="showActionsSession(session)">{{session.id}}</a></td>
								      <td>{{session.actions.length | number:2}}</td>
								      <td>{{session.time | msConverter}}</td>
								      <td>{{session.effectiveness | number:2}} %</td>
								      <td>{{session.efficiency | number:2}} %</td>
								      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
							<div class="table-labels">
								<span class="title">{{ 'label' | translate }}:</span>
								<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
							</div>
			            </div>
			            
			            <div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'sessions'">
			            	<h3>
								Tabela de Sessões ({{ taskCtrl.result.sessions.length }}):
							</h3>
			            	<div class="usdm-withscroll-large">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
								      <th ts-criteria="actions.length|parseInt">{{ 'datamining.tasks.actions' | translate }}</th>
								      <th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
								      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								      <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								      <th ts-criteria="classification|lowercase">{{ 'datamining.tasks.class' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr class="session-{{session.classification}}" ng-repeat="session in taskCtrl.result.sessions" ts-repeat>
								      <td><a ng-click="showActionsSession(session)">{{session.id}}</a></td>
								      <td>{{session.actions.length | number:2}}</td>
								      <td>{{session.time | msConverter}}</td>
								      <td>{{session.effectiveness | number:2}} %</td>
								      <td>{{session.efficiency | number:2}} %</td>
								      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
							<div class="table-labels">
								<span class="title">{{ 'label' | translate }}:</span>
								<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
							</div>
						</div>
						 
						<div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'actions'">
				            
				            <usdm-session-info session="taskCtrl.userSession"
				            	get-classification-from-enum="getClassificationFromEnum(clas)">
				            </usdm-session-info>
				            
				            <div class="row-fluid">
				            	<div class="span6" ng-show="actionViewSelected != null">
			        				<usdm-action-info action="actionViewSelected"
									 	situations-enum="situationsEnum"
									 	special-actions-enum="specialActionsEnum"
									 	situation-aux="situationAux"
									 	situation-special-aux="specialSituationAux"
									 	on-select-situation="selectSituationAction(id, sit)"
									 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
									 </usdm-action-info>
				            	</div>
				            	<div ng-class="{'span6' : actionViewSelected != null, 'span12 u-without-margin-left' : actionViewSelected == null}">
				            		<h3>
										Tabela de Ações ({{ taskCtrl.userSession.actions.length }}):
									</h3>
				            		<div class="usdm-withscroll">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  <thead>
										    <tr>
										      <th ts-criteria="id">Id</th>
										      <th ts-criteria="id">Ok</th>
										      <th ts-criteria="id">Err</th>
										      <th ts-criteria="time |parseInt" ts-default="ascending">Hora</th>
										      <th ts-criteria="action">Acao</th>
										      <th ts-criteria="element|lowercase">Elemento</th>
										      <th ts-criteria="local|lowercase">Local</th>
										    </tr>
										  </thead>
										  <tbody>
										    <tr ng-click="setActionViewSelected(action)" ng-class="{ 'action-required': action.required == true }" class="action-situation-{{idSituationAction(action.identifier)}}" ng-repeat="action in taskCtrl.userSession.actions" ts-repeat>
										      <td color-action color-action-elem="action" color-ctrl="taskCtrl" title="Count = {{taskCtrl.result.pageViewActionCount[action.identifier]}}">{{action.identifier}}</td>
										      <td class="text-center" ng-click="setSituationAction(action.identifier, situationsEnum.OK)">
										      	<i ng-show="isSituationAction(action.identifier, situationsEnum.OK)" class="icon-ok-sign"></i>
										      	<i ng-hide="isSituationAction(action.identifier, situationsEnum.OK)" class="icon-ok-circle"></i>
										      </td>
										      <td class="text-center" ng-click="setSituationAction(action.identifier, situationsEnum.ERROR)">
										      	<i ng-show="isSituationAction(action.identifier, situationsEnum.ERROR)" class="icon-remove-sign"></i>
										      	<i ng-hide="isSituationAction(action.identifier, situationsEnum.ERROR)" class="icon-remove-circle"></i>
										      </td>
										      <td>{{action.time | date:"dd/MM/yyyy ' ' HH:mm:ss"}}</td>
										      <td>{{action.action}}</td>
										      <td title="{{action.element}}">{{action.element | cut:true:15:'&hellip;'}}</td>
										      <td title="{{action.local}}">{{action.local | cut:true:15:'&hellip;'}}</td>
										    </tr>
										  </tbody>
										</table>
									</div>
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
										<span class="label label-info">{{ 'required' | translate }}</span>
									</div>
				            	</div>
				            </div>
				            
						</div>
						<!--
						<div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'actionsCount'">
							
							<div ng-show="actionViewSelectedMost != null">
		        				<usdm-action-info action="actionViewSelectedMost"
								 	situations-enum="situationsEnum"
								 	special-actions-enum="specialActionsEnum"
								 	situation-aux="situationAux"
								 	situation-special-aux="specialSituationAux"
								 	on-select-situation="selectSituationAction(id, sit)"
								 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
								 </usdm-action-info>
							</div>
				            
				            <div class="usdm-withscroll">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="$key|lowercase">Id</th>
								      <th ts-criteria="$key|lowercase">Ok</th>
								      <th ts-criteria="$key|lowercase">Err</th>
								      <th ts-criteria="count|parseInt" ts-default="descending">Count</th>
								      <th ts-criteria="value|lowercase">{{ 'datamining.tasks.actions.description' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr ng-click="setActionViewSelectedMostRealized(action.$key)" ng-class="{ 'action-required': getActionInfoFromId(action.$key).required == true }" class="action-situation-{{idSituationAction(action.$key)}}" ng-repeat="action in taskCtrl.actionsArr" ts-repeat>
								      <td color-action color-action-elem="action" color-ctrl="taskCtrl">{{ action.$key }}</td>
								      <td class="text-center" ng-click="setSituationAction(action.$key, situationsEnum.OK)">
								      	<i ng-show="isSituationAction(action.$key, situationsEnum.OK)" class="icon-ok-sign"></i>
								      	<i ng-hide="isSituationAction(action.$key, situationsEnum.OK)" class="icon-ok-circle"></i>
								      </td>
								      <td class="text-center" ng-click="setSituationAction(action.$key, situationsEnum.ERROR)">
								      	<i ng-show="isSituationAction(action.$key, situationsEnum.ERROR)" class="icon-remove-sign"></i>
								      	<i ng-hide="isSituationAction(action.$key, situationsEnum.ERROR)" class="icon-remove-circle"></i>
								      </td>
								      <td>{{ action.count }}</td>
								      <td>{{ action.value }}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
							<div class="table-labels">
								<span class="title">{{ 'label' | translate }}:</span>
								<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
								<span class="label label-info">{{ 'required' | translate }}</span>
							</div>
						</div>
						-->
						
						<div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'actionsRequiredCount'">
							
							<div class="row-fluid">
			            		<div class="span6" ng-show="actionViewSelectedMost != null">
	        						<usdm-action-info action="actionViewSelectedMost"
									 	situations-enum="situationsEnum"
									 	special-actions-enum="specialActionsEnum"
									 	situation-aux="situationAux"
									 	situation-special-aux="specialSituationAux"
									 	on-select-situation="selectSituationAction(id, sit)"
									 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
									 </usdm-action-info>
								</div>
				            	<div ng-class="{'span6' : actionViewSelectedMost != null, 'span12 u-without-margin-left' : actionViewSelectedMost == null}">
				            		<h3>
										Tabela de Ações Obrigatórias ({{ taskCtrl.actionsRequiredArr.length }}):
									</h3>
				            		<div class="usdm-withscroll">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  <thead>
										    <tr>
										    	<th ts-criteria="value|lowercase" ts-default="descending">Id</th>
										    	<th ts-criteria="id|lowercase">Ok</th>
											    <th ts-criteria="id|lowercase">Err</th>
										      	<th ts-criteria="$key|lowercase">{{ 'datamining.tasks.actions.description' | translate }}</th>
										    </tr>
										  </thead>
										  <tbody>
										    <tr ng-click="setActionViewSelectedMostRealized(action.id)" class="action-situation-{{idSituationAction(action.id)}}" ng-repeat="action in taskCtrl.actionsRequiredArr" ts-repeat>
										       	<td color-action color-action-elem="action" color-ctrl="taskCtrl">{{ action.id }}</td>
										      	<td class="text-center" ng-click="setSituationAction(action.id, situationsEnum.OK)">
										      		<i ng-show="isSituationAction(action.id, situationsEnum.OK)" class="icon-ok-sign"></i>
										      		<i ng-hide="isSituationAction(action.id, situationsEnum.OK)" class="icon-ok-circle"></i>
										      	</td>
										      	<td class="text-center" ng-click="setSituationAction(action.id, situationsEnum.ERROR)">
										      		<i ng-show="isSituationAction(action.id, situationsEnum.ERROR)" class="icon-remove-sign"></i>
										      		<i ng-hide="isSituationAction(action.id, situationsEnum.ERROR)" class="icon-remove-circle"></i>
										      	</td>
										      	<td>{{ action.$key }}</td>
										    </tr>
										  </tbody>
										</table>
									</div>
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
									</div>
				            	</div>
				            </div>
							
						</div>
						
						
						<div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'frequentPatterns'">
							<h3>
								Tabela de Padrões ({{ taskCtrl.frequentPatterns.length }}):
							</h3>
							<div class="usdm-withscroll">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th>{{ 'pattern' | translate }}</th>
								      <th ts-criteria="supportSize|parseInt" ts-default="descending">{{ 'datamining.pattern.support' | translate }}</th>
								      <th ts-criteria="itemsetsSize|parseInt" ts-default="descending">{{ 'datamining.pattern.itemsetsize' | translate }}</th>
								      <th ts-criteria="itemsetsFormattedText">{{ 'datamining.pattern' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr ng-repeat="pattern in taskCtrl.frequentPatterns" ts-repeat>
								      <td><a ng-click="showFrequentPattern(pattern)">{{ 'pattern' | translate }} {{pattern.key}}</a></td>
								      <td>{{pattern.supportSize}}</td>
								      <td>{{pattern.itemsetsSize}}</td>
								      <td>{{pattern.itemsetsFormattedText}}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
			            </div>
			            <div class="usdm-box-body" ng-show="taskCtrl.mode.name == 'pattern'">
			            	<div class="usdm-box-body">
					            <dl>
					            	<dt class="ng-binding">{{ 'datamining.pattern.metrics' | translate }}:</dt>
					            	<dd class="ng-binding">
					            		{{ 'datamining.pattern' | translate }}: <b>{{ taskCtrl.frequentPatternActive.itemsetsFormattedText }}</b>.<br/>
			            				{{ 'datamining.pattern.support.desc' | translate }}: <b>{{taskCtrl.frequentPatternActive.supportSize}}</b>.<br/>
			            				{{ 'datamining.pattern.effectiveness.desc' | translate }}: <b>{{taskCtrl.frequentPatternActive.effectivenessMean | number:2}}</b>.<br/>
			            				{{ 'datamining.pattern.efficiency.desc' | translate }}: <b>{{taskCtrl.frequentPatternActive.efficiencyMean | number:2}}</b>.<br/>
			            				{{ 'datamining.pattern.rateSuccess.desc' | translate }}: <b>{{taskCtrl.frequentPatternActive.successMean | number:2}}</b>.<br/>
			            				{{ 'datamining.pattern.rateRequired.desc' | translate }}: <b>{{taskCtrl.frequentPatternActive.requiredMean | number:2}}</b>.
					            	</dd>
					            </dl>
		            		</div>
		            		<br/>
		            		<h3>{{ 'datamining.pattern.actions' | translate }} ({{ taskCtrl.frequentPatternActive.itemsetsFormatted.length }}):</h3>
		            		<div class="usdm-withscroll">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="id|parseInt">{{ 'id' | translate }}</th>
								      <th ts-criteria="count|parseInt">{{ 'count' | translate }}</th>
								      <th ts-criteria="desc">{{ 'datamining.tasks.actions.description' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr ng-repeat="action in taskCtrl.frequentPatternActive.itemsetsFormatted" ts-repeat>
								      <td>{{action.idAction}}</td>
								      <td>{{action.count}}</td>
								      <td>{{action.desc}}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
							<br/>
		            		<h3>{{ 'datamining.pattern.sessions' | translate }} ({{ taskCtrl.frequentPatternActive.sessionsFormatted.length }}):</h3>
		            		<div class="usdm-withscroll">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
								      <th ts-criteria="actions.length|parseInt">{{ 'datamining.tasks.actions' | translate }}</th>
								      <th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
								      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								      <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								      <th ts-criteria="classification|lowercase">{{ 'datamining.tasks.class' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr class="session-{{session.classification}}" ng-repeat="session in taskCtrl.frequentPatternActive.sessionsFormatted" ts-repeat>
								      <td><a ng-click="showActionsSession(session)">{{session.id}}</a></td>
								      <td>{{session.actions.length | number:2}}</td>
								      <td>{{session.time | msConverter}}</td>
								      <td>{{session.effectiveness | number:2}} %</td>
								      <td>{{session.efficiency | number:2}} %</td>
								      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
								    </tr>
								  </tbody>
								</table>
								<div class="table-labels">
									<span class="title">{{ 'label' | translate }}:</span>
									<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
								</div>
							</div>
			            </div>
						
						
						<hr/>
					</div>
	        	</div>
	        	<!-- FIM DA ETAPA 2 -->
	        	
	        	
	        	<!-- ETAPA 3 -->
	        	<div ng-show="stepEval == 3">
        			
        			<usdm-progress-header 
					 	step-number="stepEval"
					 	on-step-eval-back="stepEvalBack()"
					 	on-step-eval-next="stepEvalNext()"
					 	show-info="showInfoStep3"
					 	title="'dataminint.step.clustering' | translate"
					 	info="'dataminint.step.clustering.info' | translate">
					 </usdm-progress-header>
	        	
	        		<div class="usdm-box">
	        			<h2 class="usdm-box-header">
	        				Clusterizar Sessões
	        			</h2>
	        			<div class="usdm-box-body">
				            <form name="myForm" class="usdm-clickable-box-form-lite form-layout">
								<fieldset>
									<div class="row-fluid">
										<div class="control-group span6">
							            	<label class="control-label" for="minclusters">{{ 'datamining.clustering.number.minclusters' | translate}}:*</label>
							            	<div class="controls">
							            		<input class="span12" type="text" placeholder="{{ 'datamining.clustering.number.minclusters' | translate}}" 
							            				ng-model="taskCtrl.minclusters" id="minclusters" />
							            	</div>
							        	</div>
							        	<div class="control-group span6">
							            	<label class="control-label" for="distancecenters">{{ 'datamining.clustering.threshold.distancecenters' | translate}}:*</label>
							            	<div class="controls">
							                	<input class="span12" type="text" placeholder="{{ 'datamining.clustering.threshold.distancecenters' | translate}}" 
							            				ng-model="taskCtrl.distancecenters" id="distancecenters" /> 
							            	</div>
							        	</div>
						        	</div>
									<hr/>
						        	<div class="form-actions">
						            	<button ng-click="taskCtrl.clustering()"  class="btn btn-primary pull-right submit">Clusterizar</button>
						        	</div>
								</fieldset>
							</form>
	        			</div>
	        		</div>
	        		
	        		<div class="usdm-box" ng-show="taskCtrl.lastClustering != null">
	        			<h2 class="usdm-box-header">
	        				Resultados
	        			</h2>
	        			<div class="usdm-box-body">
	        			
	        				<div class="usdm-info-box">
								<div class="row-fluid">
									<div class="usdm-info-box-div-header u-transparent-color-header">
										Informações da Clusterização
									</div>
									
									<div class="usdm-info-box-div6">
										<div class="usdm-info-box-label">Quantidade de Clusters:</div>
										<div class="usdm-info-box-span">
											{{ taskCtrl.lastClustering.numClusters }}
										</div>
									</div>
									<div class="usdm-info-box-div6">
										<div class="usdm-info-box-label">Distância Euclidiana entre "melhores" Clusters:</div>
										<div class="usdm-info-box-span">
											{{ taskCtrl.lastClustering.distanceThreshold }}
										</div>
									</div>
								</div>
								<div class="row-fluid">
									<div class="usdm-info-box-div6">
										<div class="usdm-info-box-label">Tamanho do Grupo "Referência":</div>
										<div class="usdm-info-box-span">
												{{ taskCtrl.lastClustering.sessionsBest.length }}
										</div>
									</div>
									<div class="usdm-info-box-div6">
										<div class="usdm-info-box-label">Tamanho do Grupo "Demais Sessões":</div>
										<div class="usdm-info-box-span">
											{{ taskCtrl.lastClustering.sessionsOthers.length }}
										</div>
									</div>
								</div>
							</div>
	        				<hr/>
				            
				            
				            <!-- Chart -->
				            <h3>
		        				Gráfico das Sessões Clusterizadas
		        			</h3>
	        				<nvd3 options="clusterOptions" data="clusterData" api="clusterApi"></nvd3>
	        				<hr/>
	        				
	        				
	        				<!-- Table -->
	        				<h3>
		        				Tabela das Sessões Clusterizadas ({{ taskCtrl.lastClustering.sessions.length }}):
		        			</h3>
		        			
		        			<usdm-filter-table usdm-placeholder="Filtro" usdm-search-model="searchTableCluster"></usdm-filter-table>
							
	        				<div class="usdm-withscroll">
					            <table cellpadding="0" cellspacing="0" border="0" class="table table-bordered dinamic-table" ts-wrapper>
								  <thead>
								    <tr>
								   		<th ts-criteria="point.isBest|lowercase" ts-default="descending">Grupo</th>
								      	<th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
								      	<th ts-criteria="actions.length|parseInt">{{ 'datamining.tasks.actions' | translate }}</th>
								      	<th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
								      	<th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
								      	<th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
								      	<th ts-criteria="classification|lowercase">{{ 'datamining.tasks.class' | translate }}</th>
								    </tr>
								  </thead>
								  <tbody>
								    <tr ng-class="{ 'session-best-true' : session.point.isBest, 'session-best-false' : !session.point.isBest }" 
								    	ng-repeat="session in taskCtrl.lastClustering.sessions | filter:searchTableCluster" ts-repeat>
								      
							      	  <td class="text-center" ng-click="taskCtrl.changePointGroup(session)">
							      		<i ng-show="session.point.isBest" class="icon-ok-sign"></i>
							      		<i ng-hide="session.point.isBest" class="icon-ok-circle"></i>
							      	  </td>
								      <td><a ng-click="showActionsSessionGuide(session)">{{session.id}}</a></td>
								      <td>{{session.actions.length | number:2}}</td>
								      <td>{{session.time | msConverter}}</td>
								      <td>{{session.effectiveness | number:2}} %</td>
								      <td>{{session.efficiency | number:2}} %</td>
								      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
								    </tr>
								  </tbody>
								</table>
							</div>
							<div class="table-labels">
								<span class="title">{{ 'label' | translate }}:</span>
								<span class="label label-info">{{ 'dataminint.step.clustering.best' | translate }}</span>
								<span class="label label-warning">{{ 'dataminint.step.clustering.others' | translate }}</span>
							</div>
	        			</div>
	        		</div>
	        	</div>
	        	<!-- FIM DA ETAPA 3 -->
	        	
	        	
	        	<!-- ETAPA 4 -->
	        	<div ng-show="stepEval == 4">
	        		
	        		<usdm-progress-header 
					 	step-number="stepEval"
					 	on-step-eval-back="stepEvalBack()"
					 	on-step-eval-next="stepEvalNext()"
					 	show-info="showInfoStep4"
					 	title="'dataminint.step.comparing' | translate"
					 	info="'dataminint.step.comparing.info' | translate">
					 </usdm-progress-header>
	        	
	        		<div class="usdm-box">
	        			<h2 class="usdm-box-header">
	        				Comparar Grupos de Sessões
	        			</h2>
	        			<div class="usdm-box-body">
	        			
	        				<form name="myForm" class="usdm-clickable-box-form-lite form-layout">
								<fieldset>
									<div class="row-fluid">
										<div class="control-group span6">
							            	<label class="control-label" for="minSupBest">Suporte Mínimo de Sessões ("Referência"):*</label>
							            	<div class="controls">
							            		<input class="span12" type="text" 
							            				ng-model="taskCtrl.minSupBest" id="minSupBest" />
							            	</div>
							        	</div>
							        	<div class="control-group span6">
							            	<label class="control-label" for="minItensBest">Qtd. Mínima de Itens ("Referência"):*</label>
							            	<div class="controls">
							                	<input class="span12" type="text" 
							            				ng-model="taskCtrl.minItensBest" id="minItensBest" /> 
							            	</div>
							        	</div>
						        	</div>
						        	<div class="row-fluid">
										<div class="control-group span6">
							            	<label class="control-label" for="minSupOthers">Suporte Mínimo de Sessões ("Demais Sessões"):*</label>
							            	<div class="controls">
							            		<input class="span12" type="text" 
							            				ng-model="taskCtrl.minSupOthers" id="minSupOthers" />
							            	</div>
							        	</div>
							        	<div class="control-group span6">
							            	<label class="control-label" for="minItensOthers">Qtd. Mínima de Itens ("Demais Sessões"):*</label>
							            	<div class="controls">
							                	<input class="span12" type="text" 
							            				ng-model="taskCtrl.minItensOthers" id="minItensOthers" /> 
							            	</div>
							        	</div>
						        	</div>
									<hr/>
						        	<div class="form-actions">
						            	<button ng-click="taskCtrl.comparing()"  class="btn btn-primary pull-right submit">Comparar Grupos de Sessões</button>
						        	</div>
								</fieldset>
							</form>
	        			</div>
	        		</div>
	        		
	        		
	        		<div class="usdm-box" ng-show="taskCtrl.lastPatternsResult != null">
	        			<h2 class="usdm-box-header">
	        				Resultados
	        			</h2>
	        			<div class="usdm-box-body">
	        			
	        				<div class="row-fluid btn-group usdm-btn-group">
	        				
							  <button type="button" class="btn usdm-div3" ng-repeat="type in typePatternsResultArrayEnum"
							  	ng-class=" {'active' : type.id == typePatternsResultSelected.id } " ng-click="changeTypePatternsResultSelected(type)">
							  	{{type.desc}}
							  </button>
							  
							</div>
	        			
	        				<h3 class="usdm-box-header">
		        				{{typePatternsResultSelected.desc}} ({{ typePatternsResultSelected.val.length }}):
		        			</h3>
		        			
		        			<p>
		        				{{typePatternsResultSelected.info}}
		        			</p>
		        			<div>
		        				<button ng-click="taskCtrl.changeAll()"  class="btn btn-primary">Alterar Todas para {{typePatternsResultSelected.desc}}</button>
		        				<button ng-click="taskCtrl.changeNormal()"  class="btn btn-primary">Alterar "Ações Normais" para {{typePatternsResultSelected.desc}}</button>
		        			</div>
		        			<br/>
		        			
		        			<div class="row-fluid">
			            		
				            	<div class="span12">
				            		<div class="usdm-withscroll">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  <thead>
										    <tr>
										      <th ts-criteria="identifier" ts-default="ascending">Id</th>
										      <th ts-criteria="action">Ação</th>
										      <th ts-criteria="infoTag">TAG</th>
										      <th ts-criteria="infoName">Name</th>
										      <th ts-criteria="element|lowercase">Elemento</th>
										      <th ts-criteria="local|lowercase">Local</th>
										    </tr>
										  </thead>
										  <tbody>
										    <tr ng-click="setActionViewPatternResult(action)" ng-class="{ 'action-required': action.required == true }" 
										    	class="action-situation-{{idSituationAction(action.identifier)}}" ng-repeat="action in typePatternsResultSelected.val" ts-repeat>
											  <td>{{action.identifier}}</td>
										      <td>{{action.action}}</td>
										      <td>{{action.infoTag}}</td>
										      <td title="{{action.infoName}}">{{action.infoName | cut:true:15:'&hellip;'}}</td>
										      <td title="{{action.element}}">{{action.element | cut:true:15:'&hellip;'}}</td>
										      <td title="{{action.local}}">{{action.local | cut:true:15:'&hellip;'}}</td>
										    </tr>
										  </tbody>
										</table>
									</div>
									
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span ng-repeat="label in situationsEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
										<span class="label label-info">{{ 'required' | translate }}</span>
									</div>
				            	</div>
				            </div>
				            
				            <hr/>
				            
				            <div class="row-fluid" ng-show="sessionsActionPatternResult != null && actionViewPatternResult != null">
				            	<div class="span6">
									<div class="usdm-title-margin">
										 <usdm-action-info action="actionViewPatternResult"
										 	situations-enum="situationsEnum"
										 	special-actions-enum="specialActionsEnum"
										 	situation-aux="situationAux"
										 	situation-special-aux="specialSituationAux"
										 	on-select-situation="selectSituationAction(id, sit)"
										 	on-select-special-situation="selectSpecialSituationAction(id, sit)">
										 </usdm-action-info>
						            </div>
					            </div>
			            		<div class="span6">
			            			<h3>
				        				Sessões que contém a Ação ({{ sessionsActionPatternResult.length }}):
				        			</h3>
			            			<div class="usdm-withscroll">
							            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dinamic-table" ts-wrapper>
										  <thead>
										    <tr>
										      <th ts-criteria="username|lowercase">{{ 'datamining.tasks.evaluate.user' | translate }}</th>
										      <th ts-criteria="actions.length|parseInt">{{ 'datamining.tasks.actions' | translate }}</th>
										      <th ts-criteria="time|parseInt">{{ 'datamining.tasks.time' | translate }}</th>
										      <th ts-criteria="effectiveness|parseFloat">{{ 'datamining.tasks.effectiveness' | translate }}</th>
										      <th ts-criteria="efficiency|parseFloat">{{ 'datamining.tasks.efficiency' | translate }}</th>
										      <th ts-criteria="classification|lowercase">{{ 'datamining.tasks.class' | translate }}</th>
										    </tr>
										  </thead>
										  <tbody>
										    <tr class="session-{{session.classification}}" ng-repeat="session in sessionsActionPatternResult" ts-repeat>
										      <td><a ng-click="showActionsSessionGuide(session)">{{session.id}}</a></td>
										      <td>{{session.actions.length | number:2}}</td>
										      <td>{{session.time | msConverter}}</td>
										      <td>{{session.effectiveness | number:2}} %</td>
										      <td>{{session.efficiency | number:2}} %</td>
										      <td>{{getClassificationFromEnum(session.classification).desc}}</td>
										    </tr>
										  </tbody>
										</table>
									</div>
									<div class="table-labels">
										<span class="title">{{ 'label' | translate }}:</span>
										<span ng-repeat="label in classificationEnum" ng-if="label.desc" class="label {{label.classLabel}}">{{label.desc}}</span>
									</div>
									
									
			            		</div>
			            	</div>
							
							
						</div>
					</div>


        		</div>	        	
			    	
		    	</div>
	        </div>
	    </div>	    
    </div>
    
    